(this.webpackJsonpkraken=this.webpackJsonpkraken||[]).push([[0],{292:function(e,t,a){},299:function(e,t){},301:function(e,t){},474:function(e,t,a){"use strict";a.r(t);var n=a(12),c=a(0),o=a.n(c),s=a(28),r=a.n(s),l=(a(292),a(186)),i=a(253),d=a(254),m=a(139),u=a(284),j=a(282),h=a(488),p=a(487),b=a(490),x=(a(293),a(294),a(255)),O=a.n(x),f=a(486),g=a(493),v=a(483),w=a(492),k=a(121),S=h.a.Option,y=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(e){var c;Object(i.a)(this,a),(c=t.call(this,e)).menu=Object(n.jsxs)(p.a,{children:[Object(n.jsx)(p.a.Item,{children:Object(n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.alipay.com/",children:"1 sec"})}),Object(n.jsx)(p.a.Item,{children:Object(n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.taobao.com/",children:"2 sec"})}),Object(n.jsx)(p.a.Item,{children:Object(n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.tmall.com/",children:"3 sec"})})]}),c.pieces=Object(n.jsx)(p.a,{children:Object(n.jsx)(p.a.Item,{children:Object(n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.alipay.com/",children:"Schumann/Liszt Widmung(Trifonov)"})})}),c.enterLoading=function(){Object(m.a)(c);c.state.socket.connect(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t=new(window.AudioContext||window.webkitAudioContext),a=t.createMediaStreamSource(e),n=t.createScriptProcessor(4096,1,1);c.state.socket.emit("sample_rate",t.sampleRate),n.onaudioprocess=function(e){var a=e.inputBuffer.getChannelData(0),n={};a.forEach((function(e,t){n[t]=e})),c.state.socket.emit("message",n),c.setState({lenSamples:c.state.lenSamples+1}),c.state.lenSamples>=3*t.sampleRate/4096&&(c.setState({lenSamples:0}),c.state.socket.emit("tempo",!0))},c.state.socket.on("output local tempo",(function(e){var t=e.tempo,a=e.volume;c.setState({tempoData:[].concat(Object(l.a)(c.state.tempoData),[{x:3*c.state.tempoData.length,y:t}]),volumeData:[].concat(Object(l.a)(c.state.volumeData),[{x:3*c.state.volumeData.length,y:a}]),tempoVolume:[{x:t,y:a}]})})),c.state.socket.on("output global tempo",(function(e){var t=e.tempo,a=e.volume;c.setState({globalTempo:t+" BPM",globalVolume:a+"db"})})),a.connect(n),n.connect(t.destination),c.setState({source:a,node:n})}))},c.stop=function(){c.state.source&&(c.state.socket.emit("tempo",!1),console.log(c.state.signal),c.state.node.disconnect(),c.state.source.disconnect(),c.setState({source:null,node:null}))},c.pieceChange=function(){},c.windowChange=function(){};var o=O()("https://www.tonetwelve.com/test");return c.state={started:!1,microphone:null,socket:o,lenSamples:0,globalTempo:"none",globalVolume:"none",tempoData:[],pTempoData:[],volumeData:[],pVolumeData:[],tempoVolume:[{x:0,y:0}]},c}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"main-container",children:[Object(n.jsxs)("div",{className:"info-container",children:[Object(n.jsx)("h3",{children:"Tempo(BPM)"}),Object(n.jsx)(f.a,{theme:g.a.material,children:Object(n.jsx)(v.a,{interpolation:"natural",style:{data:{stroke:k.blue.primary},parent:{border:"1px solid #ccc"}},data:this.state.tempoData})}),Object(n.jsx)("h3",{children:"Volume(db)"}),Object(n.jsx)(f.a,{theme:g.a.material,children:Object(n.jsx)(v.a,{style:{data:{stroke:k.magenta.primary},parent:{border:"1px solid #ccc"}},data:this.state.volumeData})}),Object(n.jsx)("h3",{children:"Tempo vs Volume"}),Object(n.jsx)(f.a,{theme:g.a.material,domain:{x:[70,200],y:[70,150]},children:Object(n.jsx)(w.a,{style:{data:{fill:k.cyan.primary},parent:{border:"1px solid #ccc"}},data:this.state.tempoVolume})})]}),Object(n.jsxs)("div",{className:"flex-row",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{children:["Global Tempo: ",this.state.globalTempo]}),Object(n.jsxs)("h3",{children:["Global Volume: ",this.state.globalVolume]})]}),Object(n.jsxs)("div",{className:"center-console",children:[Object(n.jsx)(b.a,{type:"primary",onClick:function(){return e.enterLoading()},children:"Start"}),Object(n.jsx)(b.a,{type:"danger",onClick:function(){return e.stop()},children:"Stop"}),Object(n.jsx)(h.a,{defaultValue:"widmung",style:{width:120},onChange:function(){return e.pieceChange()},children:Object(n.jsx)(S,{value:"widmung",children:"Widmung"})}),Object(n.jsxs)(h.a,{defaultValue:"3",style:{width:120},onChange:function(){return e.windowChange()},children:[Object(n.jsx)(S,{value:"3",children:"3 Secs"}),Object(n.jsx)(S,{value:"3",children:"6 Secs"}),Object(n.jsx)(S,{value:"3",children:"9 Secs"})]})]})]})]})})}}]),a}(o.a.Component),C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,495)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),o(e),s(e)}))};r.a.render(Object(n.jsxs)(o.a.StrictMode,{children:[Object(n.jsx)("div",{className:"app-header",children:Object(n.jsx)("h1",{children:"Vivace"})}),Object(n.jsx)(y,{})]}),document.getElementById("root")),C()}},[[474,1,2]]]);
//# sourceMappingURL=main.92dfe7b1.chunk.js.map