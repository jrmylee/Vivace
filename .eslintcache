[{"/Users/jrmylee/Documents/dev/projects/mir/projects/kraken/src/App.js":"1","/Users/jrmylee/Documents/dev/projects/mir/projects/vivace/src/App.js":"2","/Users/jrmylee/Documents/dev/projects/mir/projects/vivace/src/reportWebVitals.js":"3","/Users/jrmylee/Documents/dev/projects/mir/projects/vivace/src/index.js":"4"},{"size":7172,"mtime":1609611850857,"results":"5","hashOfConfig":"6"},{"size":6768,"mtime":1611018213727,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1609777522004,"results":"9","hashOfConfig":"8"},{"size":544,"mtime":1610655809318,"results":"10","hashOfConfig":"8"},{"filePath":"11","messages":"12","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"12z1rlu",{"filePath":"13","messages":"14","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"15"},"dbxwgj",{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/jrmylee/Documents/dev/projects/mir/projects/kraken/src/App.js",["20"],"/Users/jrmylee/Documents/dev/projects/mir/projects/vivace/src/App.js",["21","22","23"],"import { Button, Menu, Select } from 'antd';\nimport React from 'react';\nimport 'antd/dist/antd.css'; // or 'antd/dist/antd.less'\nimport 'microphone-stream';\nimport io from 'socket.io-client';\nimport { VictoryChart, VictoryLine, VictoryTheme, VictoryScatter, VictoryLegend } from \"victory\";\nimport { blue, magenta, cyan } from '@ant-design/colors';\n\nconst { Option } = Select;\n\nclass App extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    var socket = io(\"https://tonetwelve.com/test\");\n    this.state = {\n      started : false,\n      microphone : null,\n      socket: socket,\n      lenSamples : 0,\n      globalTempo: \"none\",\n      globalVolume: \"none\",\n      tempoData: [],\n      pTempoData: [],\n      volumeData: [],\n      pVolumeData: [],\n      tempoVolume: [{x: 0, y: 0}]\n    };\n  }\n  pieces = (\n    <Menu>\n      <Menu.Item>\n        <a target=\"_blank\" rel=\"noopener noreferrer\">\n          Schumann/Liszt Widmung(Trifonov)\n        </a>\n      </Menu.Item>\n    </Menu>\n  )\n  enterLoading = () => {\n    var ob = this;\n    this.state.socket.connect();\n    navigator.mediaDevices\n      .getUserMedia({ audio: true }).then((stream) => {\n        var audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        var source = audioContext.createMediaStreamSource(stream);\n        var node = audioContext.createScriptProcessor(4096, 1, 1);\n        var winLength = 1;\n        this.state.socket.emit('sample_rate', audioContext.sampleRate);\n        \n        node.onaudioprocess = (audioProcessingEvent) => {\n            // The input buffer is the song we loaded earlier\n          let inputBuffer = audioProcessingEvent.inputBuffer;\n          var left = inputBuffer.getChannelData(0);\n          var obj = {};\n          left.forEach((elem, i) => {\n            obj[i] = elem;\n          })\n          this.state.socket.emit(\"message\", obj);\n          this.setState({lenSamples : this.state.lenSamples + 1})\n          // take 3 seconds of samples\n          if(this.state.lenSamples >= (winLength * audioContext.sampleRate) / 4096 ) {\n            this.setState({lenSamples : 0 });\n            this.state.socket.emit('tempo', true);\n          }\n        }\n        this.state.socket.on('output local tempo', ({tempo, volume, p_volume, p_tempo}) => {\n          this.setState({\n            tempoData: [...this.state.tempoData, {x: this.state.tempoData.length * winLength, y: tempo}],\n            pTempoData: [...this.state.pTempoData, {x: this.state.tempoData.length * winLength, y: p_tempo}],\n            pVolumeData: [...this.state.pVolumeData, {x: this.state.volumeData.length * winLength, y: p_volume}],\n            volumeData: [...this.state.volumeData, {x: this.state.volumeData.length * winLength, y: volume}],\n            tempoVolume: [{x: tempo, y: volume}],\n            pTempoVolume: [{x: p_tempo, y: p_volume}]\n          })\n        })\n        this.state.socket.on('output global tempo', ({tempo, volume}) => {\n          this.setState({\n            globalTempo : tempo + \" BPM\",\n            globalVolume : volume + \"db\"\n          })\n        })\n        // Connect the microphone to the script processor\n        source.connect(node);\n        node.connect(audioContext.destination);\n\n        this.setState({\n          source: source,\n          node: node\n        })\n      });\n  };\n  stop = () => {\n    if(this.state.source){\n      this.state.socket.emit(\"tempo\", false);\n      console.log(this.state.signal);\n      this.state.node.disconnect();\n      this.state.source.disconnect();\n      this.setState({\n        source: null,\n        node: null,\n      });\n    }\n  };\n  pieceChange = () => {\n\n  };\n  windowChange = () => {\n\n  }\n  render() {\n    return (\n      <>\n        <div className=\"main-container\">\n          <div className=\"info-container\">\n          <VictoryLegend x={125} y={10}\n            title=\"Performer Legend\"\n            centerTitle\n            orientation=\"horizontal\"\n            gutter={20}\n            colorScale={[\"blue\", \"cyan\" ]}\n            data={[\n              { name: \"User\" }, { name: \"Performer\" }\n            ]}\n          />\n          <h3>Tempo(BPM)</h3>\n          <VictoryChart\n            theme={VictoryTheme.material}\n          >\n            \n            <VictoryLine\n              interpolation=\"natural\"\n              style={{\n                data: { stroke: blue.primary },\n                parent: { border: \"1px solid #ccc\"}\n              }}\n              data= {this.state.tempoData}\n            />\n            <VictoryLine\n              interpolation=\"natural\"\n              style={{\n                data: { stroke: cyan.primary },\n                parent: { border: \"1px solid #ccc\"}\n              }}\n              data= {this.state.pTempoData}\n            />\n          </VictoryChart>\n          <h3>Volume(db)</h3>\n          <VictoryChart\n            theme={VictoryTheme.material}\n          >\n            <VictoryLine\n              style={{\n                data: { stroke: blue.primary },\n                parent: { border: \"1px solid #ccc\"}\n              }}\n              data= {this.state.volumeData}\n            />\n            <VictoryLine\n              style={{\n                data: { stroke: cyan.primary },\n                parent: { border: \"1px solid #ccc\"}\n              }}\n              data= {this.state.pVolumeData}\n            />\n          </VictoryChart>\n          <h3>Tempo vs Volume</h3>\n          <VictoryChart\n            theme={VictoryTheme.material}\n            domain={{ x: [70, 200], y: [70, 150] }}\n          >\n            <VictoryScatter\n              style={{\n                data: { fill: blue.primary },\n                parent: { border: \"1px solid #ccc\"}\n              }}\n              data= {this.state.tempoVolume}\n            />\n            <VictoryScatter\n              style={{\n                data: { fill: cyan.primary },\n                parent: { border: \"1px solid #ccc\"}\n              }}\n              data= {this.state.pTempoVolume}\n            />\n          </VictoryChart>\n          </div>\n          <div className=\"flex-row\">\n            <div>\n              <h3>Global Tempo: {this.state.globalTempo}</h3>\n              <h3>Global Volume: {this.state.globalVolume}</h3>\n            </div>\n            <div className=\"center-console\">\n              <Button type=\"primary\" onClick={() => this.enterLoading()}>\n                Start\n              </Button>\n              <Button type=\"danger\" onClick={() => this.stop()}>\n                Stop\n              </Button>\n              <Select defaultValue=\"widmung\" style={{ width: 300 }} onChange={() => this.pieceChange()}>\n                <Option value=\"widmung\">Widmung by Schumann/Liszt</Option>\n              </Select>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default App;","/Users/jrmylee/Documents/dev/projects/mir/projects/vivace/src/reportWebVitals.js",[],"/Users/jrmylee/Documents/dev/projects/mir/projects/vivace/src/index.js",[],{"ruleId":"24","severity":1,"message":"25","line":59,"column":9,"nodeType":"26","messageId":"27","endLine":59,"endColumn":11},{"ruleId":"24","severity":1,"message":"28","line":7,"column":16,"nodeType":"26","messageId":"27","endLine":7,"endColumn":23},{"ruleId":"29","severity":1,"message":"30","line":33,"column":9,"nodeType":"31","endLine":33,"endColumn":54},{"ruleId":"24","severity":1,"message":"25","line":40,"column":9,"nodeType":"26","messageId":"27","endLine":40,"endColumn":11},"no-unused-vars","'ob' is assigned a value but never used.","Identifier","unusedVar","'magenta' is defined but never used.","jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement"]