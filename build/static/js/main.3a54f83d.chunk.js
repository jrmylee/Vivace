(this.webpackJsonpkraken=this.webpackJsonpkraken||[]).push([[0],{293:function(e,t,a){},300:function(e,t){},302:function(e,t){},476:function(e,t,a){"use strict";a.r(t);var n=a(14),o=a(0),c=a.n(o),s=a(28),l=a.n(s),r=(a(293),a(124)),i=a(255),m=a(256),p=a(142),u=a(285),d=a(283),j=a(490),b=a(489),h=a(492),x=(a(294),a(295),a(257)),O=a.n(x),g=a(494),f=a(488),v=a(495),y=a(485),k=a(498),D=a(80),S=j.a.Option,T=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var o;Object(i.a)(this,a),(o=t.call(this,e)).pieces=Object(n.jsx)(b.a,{children:Object(n.jsx)(b.a.Item,{children:Object(n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",children:"Schumann/Liszt Widmung(Trifonov)"})})}),o.enterLoading=function(){Object(p.a)(o);o.state.socket.connect(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t=new(window.AudioContext||window.webkitAudioContext),a=t.createMediaStreamSource(e),n=t.createScriptProcessor(4096,1,1);o.state.socket.emit("sample_rate",t.sampleRate),n.onaudioprocess=function(e){var a=e.inputBuffer.getChannelData(0),n={};a.forEach((function(e,t){n[t]=e})),o.state.socket.emit("message",n),o.setState({lenSamples:o.state.lenSamples+1}),o.state.lenSamples>=1*t.sampleRate/4096&&(o.setState({lenSamples:0}),o.state.socket.emit("tempo",!0))},o.state.socket.on("output local tempo",(function(e){var t=e.tempo,a=e.volume,n=e.p_volume,c=e.p_tempo;o.setState({tempoData:[].concat(Object(r.a)(o.state.tempoData),[{x:1*o.state.tempoData.length,y:t}]),pTempoData:[].concat(Object(r.a)(o.state.pTempoData),[{x:1*o.state.tempoData.length,y:c}]),pVolumeData:[].concat(Object(r.a)(o.state.pVolumeData),[{x:1*o.state.volumeData.length,y:n}]),volumeData:[].concat(Object(r.a)(o.state.volumeData),[{x:1*o.state.volumeData.length,y:a}]),tempoVolume:[{x:t,y:a}],pTempoVolume:[{x:c,y:n}]})})),o.state.socket.on("output global tempo",(function(e){var t=e.tempo,a=e.volume;o.setState({globalTempo:t+" BPM",globalVolume:a+"db"})})),a.connect(n),n.connect(t.destination),o.setState({source:a,node:n})}))},o.stop=function(){o.state.source&&(o.state.socket.emit("tempo",!1),console.log(o.state.signal),o.state.node.disconnect(),o.state.source.disconnect(),o.setState({source:null,node:null}))},o.pieceChange=function(){},o.windowChange=function(){};var c=O()("https://tonetwelve.com/test");return o.state={started:!1,microphone:null,socket:c,lenSamples:0,globalTempo:"none",globalVolume:"none",tempoData:[],pTempoData:[],volumeData:[],pVolumeData:[],tempoVolume:[{x:0,y:0}]},o}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"main-container",children:[Object(n.jsxs)("div",{className:"info-container",children:[Object(n.jsx)(g.a,{x:125,y:10,title:"Performer Legend",centerTitle:!0,orientation:"horizontal",gutter:20,colorScale:["blue","cyan"],data:[{name:"User"},{name:"Performer"}]}),Object(n.jsx)("h3",{children:"Tempo(BPM)"}),Object(n.jsxs)(f.a,{theme:v.a.material,children:[Object(n.jsx)(y.a,{interpolation:"natural",style:{data:{stroke:D.blue.primary},parent:{border:"1px solid #ccc"}},data:this.state.tempoData}),Object(n.jsx)(y.a,{interpolation:"natural",style:{data:{stroke:D.cyan.primary},parent:{border:"1px solid #ccc"}},data:this.state.pTempoData})]}),Object(n.jsx)("h3",{children:"Volume(db)"}),Object(n.jsxs)(f.a,{theme:v.a.material,children:[Object(n.jsx)(y.a,{style:{data:{stroke:D.blue.primary},parent:{border:"1px solid #ccc"}},data:this.state.volumeData}),Object(n.jsx)(y.a,{style:{data:{stroke:D.cyan.primary},parent:{border:"1px solid #ccc"}},data:this.state.pVolumeData})]}),Object(n.jsx)("h3",{children:"Tempo vs Volume"}),Object(n.jsxs)(f.a,{theme:v.a.material,domain:{x:[70,200],y:[70,150]},children:[Object(n.jsx)(k.a,{style:{data:{fill:D.blue.primary},parent:{border:"1px solid #ccc"}},data:this.state.tempoVolume}),Object(n.jsx)(k.a,{style:{data:{fill:D.cyan.primary},parent:{border:"1px solid #ccc"}},data:this.state.pTempoVolume})]})]}),Object(n.jsxs)("div",{className:"flex-row",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{children:["Global Tempo: ",this.state.globalTempo]}),Object(n.jsxs)("h3",{children:["Global Volume: ",this.state.globalVolume]})]}),Object(n.jsxs)("div",{className:"center-console",children:[Object(n.jsx)(h.a,{type:"primary",onClick:function(){return e.enterLoading()},children:"Start"}),Object(n.jsx)(h.a,{type:"danger",onClick:function(){return e.stop()},children:"Stop"}),Object(n.jsx)(j.a,{defaultValue:"widmung",style:{width:300},onChange:function(){return e.pieceChange()},children:Object(n.jsx)(S,{value:"widmung",children:"Widmung by Schumann/Liszt"})})]})]})]})})}}]),a}(c.a.Component),V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,499)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),o(e),c(e),s(e)}))};l.a.render(Object(n.jsxs)(c.a.StrictMode,{children:[Object(n.jsx)("div",{className:"app-header"}),Object(n.jsx)(T,{})]}),document.getElementById("root")),V()}},[[476,1,2]]]);
//# sourceMappingURL=main.3a54f83d.chunk.js.map